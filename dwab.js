(()=>{"use strict";var e=320;const y=6.5,E=20,f={ALT_BG_COLOR:"darkmagenta",ALT_LEVEL_COLOR:"indigo",EXIT_COLOR:"#333",LEVEL_COLOR:"#22A9D5",OVERLAP_COLOR:"#f00",PLAYER_COLOR:"#939393"},s={ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",DEBUG:"KeyP",SPACE:"Space"},_={s:{x:240,y:0},e:{x:430,y:280,w:E,h:40},geo:[{x:240,y:0,w:E,h:e}],alt:[{x:240,y:240,w:E,h:80}]};const t=new class{init(){this.start()}start(){const t=document.getElementById("game"),o=t.getContext("2d");let l=0,n=0,i=0,c=0,a=300,r=0,L=0,h=0,d=0,O=0;function R(){r=0,L=0,d&&c<t.width-E&&(r+=3),i&&0<c&&(r-=3),O&&h<=25&&a<=t.height-E&&0<=a?(h+=1,L-=y):!O&&a<=t.height-E?(h=0,a+y>=t.height-E?L+=t.height-E-a:L+=y):a+E<=t.height&&(L+=y);var e=function(){for(var e=n?_.alt:_.geo,t=0;t<e.length;t++){var o=e[t];if(c+r+E>o.x&&c+r<o.x+o.w&&a+L+E>o.y&&a+L<o.y+o.h)return!0}return!1}();0===r||e||(c+=r),0===L||e||(a+=L)}function g(){var e;e=n?f.ALT_LEVEL_COLOR:null,document.body.style.backgroundColor=e||null,document.getElementById("game").style.backgroundColor=e?f.ALT_BG_COLOR:null,n?function(){for(var e=0;e<_.alt.length;e++){var t=_.alt[e];o.beginPath(),o.rect(t.x,t.y,t.w,t.h),o.fillStyle=f.ALT_LEVEL_COLOR,o.fill(),o.closePath()}}():(function(){for(var e=0;e<_.geo.length;e++){var t=_.geo[e];o.beginPath(),o.rect(t.x,t.y,t.w,t.h),o.fillStyle=f.LEVEL_COLOR,o.fill(),o.closePath()}}(),o.beginPath(),o.rect(_.e.x,_.e.y,_.e.w,_.e.h),o.fillStyle=f.EXIT_COLOR,o.fill(),o.closePath())}function u(){o.clearRect(0,0,t.width,t.height)}document.addEventListener("keydown",function(e){l&&console.log("key down ",e.code);e.code===s.ARROW_RIGHT?d=1:e.code===s.ARROW_LEFT?i=1:e.code===s.SPACE?(O=1,n=1):e.code===s.DEBUG&&(console.log("Debug mode is now ",!l),l=!l)},!1),document.addEventListener("keyup",function(e){l&&console.log("key up ",e.code);e.code===s.ARROW_RIGHT?d=0:e.code===s.ARROW_LEFT?i=0:e.code===s.SPACE&&(O=0,n=0)},!1),function e(){var t;u(),o.beginPath(),o.rect(c,a,E,E),o.fillStyle=f.PLAYER_COLOR,o.fill(),o.closePath(),g(),l&&(o.font="12px Arial",o.fillStyle=f.OVERLAP_COLOR,o.fillText("Player: { x:"+c+",y:"+a+"}",20,32),o.fillText("Jump:"+h,20,52)),R(),t=_.e,c+r+E>t.x&&c+r<t.x+t.w&&a+L+E>t.y&&a+L<t.y+t.h?(u(),alert("Load Level 2"),document.location.reload()):requestAnimationFrame(e)}()}};t.init()})();